{
  "component_jsx": "export function PerfumeDetailCTA({ perfume }: PerfumeDetailCTAProps) {\n  const [showStores, setShowStores] = useState(false)\n  const dropdownRef = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setShowStores(false)\n      }\n    }\n    if (showStores) {\n      document.addEventListener('mousedown', handleClickOutside)\n    }\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside)\n    }\n  }, [showStores])\n\n  const basePrice = perfume.price || 299\n  const noonPrice = basePrice\n  const namshiPrice = basePrice > 15 ? basePrice - 15 : basePrice\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"cta-section sticky bottom-4 z-20 mt-8 p-4 bg-white/90 backdrop-blur-sm rounded-3xl shadow-2xl border border-gray-200 mx-0 lg:mx-0\" ref={dropdownRef}>\n        <div className=\"flex gap-3\">\n          <ShareButton title={`${perfume.name} - ${perfume.brand}`} text={`ØµØ¨Ø§ Ø§Ø®ØªØ§Ø±Øª Ù„ÙŠ ${perfume.name} Ø¨Ù†Ø³Ø¨Ø© ${perfume.score ?? 85}% ğŸ¯ âœ… Ø¢Ù…Ù† ØªÙ…Ø§Ù…Ø§Ù‹`} variant=\"secondary\" className=\"flex-1\" />\n          <div className=\"relative flex-[2]\">\n            <Button className=\"w-full flex items-center justify-center gap-2 h-12 bg-gradient-to-r from-amber-500 to-orange-500 text-white shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all font-semibold text-base px-8 py-4 rounded-full\" onClick={() => setShowStores(!showStores)}>\n              <DollarSign className=\"w-5 h-5\" />\n              Ù‚Ø§Ø±Ù† Ø§Ù„Ø£Ø³Ø¹Ø§Ø±\n            </Button>\n            {showStores && (\n              <div className=\"absolute bottom-full right-0 mb-2 z-50 bg-white shadow-2xl rounded-2xl border-2 border-brown-text/10 p-3 grid grid-cols-2 gap-2 min-w-[280px]\" dir=\"rtl\">\n                <a href={STORES.noon(perfume)} target=\"_blank\" rel=\"noopener noreferrer\" className=\"p-3 hover:bg-gray-50 rounded-xl flex items-center gap-2 text-sm font-medium transition-colors border border-gray-100\">ğŸ›’ Noon <span className=\"text-xs opacity-75\">SAR {noonPrice}</span></a>\n                <a href={STORES.namshi(perfume)} target=\"_blank\" rel=\"noopener noreferrer\" className=\"p-3 hover:bg-gray-50 rounded-xl flex items-center gap-2 text-sm font-medium transition-colors border border-gray-100\">ğŸ‘• Namshi <span className=\"text-xs opacity-75\">SAR {namshiPrice}</span></a>\n                <a href={STORES.sixthstreet(perfume)} target=\"_blank\" rel=\"noopener noreferrer\" className=\"p-3 hover:bg-gray-50 rounded-xl flex items-center gap-2 text-sm font-semibold col-span-2 border-t border-gray-200 pt-2 mt-2 text-primary hover:text-primary/80 transition-colors\">ğŸ Ø´Ø±Ø§Ø¡ Ø¹ÙŠÙ†Ø©</a>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}",
  "conditional_render": "NO conditional rendering found - component always returns JSX",
  "perfume_data_at_line77": "<PerfumeDetailCTA perfume={perfume} /> where perfume is normalized data from getPerfumeById(id) || perfumes[0]",
  "console_errors": [
    "No errors found - only standard warnings: React DevTools, HMR connected"
  ],
  "browser_visible_elements": [
    "SpeedometerGauge (meter: ØªÙˆØ§ÙÙ‚ 92%)",
    "PerfumeTimeline (region: Perfume compatibility timeline)",
    "Button: Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¹Ø·Ø± Ø§Ù„Ø¢Ù†",
    "Button: Ø·Ù„Ø¨ Ø¹ÙŠÙ†Ø© Ø¨Ø­Ø¬Ù… 25 Ù…Ù„",
    "Button: Ø­ÙØ¸ Ø§Ù„Ø¹Ø·Ø± ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø©",
    "Button: Ø´Ø§Ø±Ùƒ Ø§Ù„Ù†ØªÙŠØ¬Ø©"
  ],
  "missing_elements": [
    "cta-section class",
    "Ù‚Ø§Ø±Ù† Ø§Ù„Ø£Ø³Ø¹Ø§Ø± button",
    "PerfumeDetailCTA component"
  ],
  "component_analysis": {
    "has_conditional": false,
    "always_returns": true,
    "client_component": true,
    "uses_hooks": true,
    "hooks_used": ["useState", "useRef", "useEffect"],
    "jsx_structure": "div.space-y-6 > div.cta-section > div.flex > ShareButton + div.relative > Button"
  },
  "page_analysis": {
    "server_component": true,
    "imports_perfume_detail_cta": true,
    "line_77_usage": "<PerfumeDetailCTA perfume={perfume} />",
    "suspense_wrappers": [
      "SpeedometerGauge wrapped in Suspense",
      "PerfumeTimeline wrapped in Suspense"
    ],
    "perfume_detail_cta_not_wrapped": true
  },
  "confession": "Component code is correct - no conditional rendering, no errors, always returns JSX. Component is imported and used at line 77 with valid perfume prop. However, it is NOT rendering in DOM. Possible causes: 1) Build/compilation issue - component not included in bundle, 2) CSS hiding component (sticky positioning with wrong z-index), 3) Component rendering but outside viewport/accessibility tree, 4) Server/Client component boundary issue causing silent failure, 5) Another component replacing/hiding it. The visible CTA buttons (Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¹Ø·Ø± Ø§Ù„Ø¢Ù†, Ø·Ù„Ø¨ Ø¹ÙŠÙ†Ø©, etc.) are NOT from PerfumeDetailCTA - they must be from SpeedometerGauge or PerfumeTimeline components."
}
